# Rust code quality

For the code in the `tui`, `cmdr`, `analytics_schema/` folders (each of which contains a
crate), do the following:

> If any cargo commands generate a ICE (Internal Compiler Error), then run `cargo clean` and try again.

1. Make sure all the code compiles (including examples) using `cargo build --all-targets`
2. Run tests using `cargo nextest run --all-targets`
3. Fix all the warnings generated by:
  - `cargo clippy --all-targets`. If this generates ICE (Internal Compiler Error), run `clippy.fish` instead
  - `cargo test --doc`
  - `cargo doc --no-deps`
4. In all the code that is part of the current git working tree, make sure that there is sufficient
   documentation and test code coverage.
   - For existing tests, make sure they add value and are not redundant or needless.
   - If they are needless, remove them. If there are missing tests, then add them.
5. Make sure that all tests and doctests pass
6. Finally run `cargo fmt` to format the code